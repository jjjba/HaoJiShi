<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.haojishi.mapper.CommonPersonalMapper">
    <select id="findPersonalByAddress" resultType="java.util.Map">
        SELECT p.id,p.name,p.phone,p.age,p.sex,p.address,p.special,p.avatar,date_format(p.create_time,'%Y-%m-%d %H:%i:%s') as create_time,p.hope_job,
        p.hope_city,p.last_login_time,p.expect_money,p.job_experience,p.state,p.info,p.photos
        FROM personal p
        <where>
            <if test="address != '' and address != null">
                AND p.address like concat('%',#{name},'%')
            </if>
        </where>
        ORDER BY
          p.last_login_time DESC
    </select>

    <select id="queryPersonalInfo" resultType="java.util.Map">
        SELECT  p.id,p.sex,p.age,p.expect_money,p.job_experience,p.state,p.info
        FROM personal p
        WHERE p.user_id = #{userId}
    </select>
</mapper>